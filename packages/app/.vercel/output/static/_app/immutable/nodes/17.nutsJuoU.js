import{s as ct,p as me,i as I,f as p,k as Ne,v as mt,e as T,a as S,t as B,c as O,b as j,g as D,d as F,m as M,h as d,u as pt,w as dt,n as gt,x as _t,y as ht,j as it,o as bt}from"../chunks/scheduler.D2KwwdHN.js";import{S as vt,i as wt,t as m,b as g,d as Se,c as b,a as v,m as w,g as De,e as k,f as kt}from"../chunks/index.yWj9ckWW.js";import{e as nt}from"../chunks/each.DZlyhWDQ.js";import{p as Nt}from"../chunks/stores.CZyAhLLN.js";import{A as Et,a as St,b as Dt}from"../chunks/avatar.B2CnpXUm.js";import{B as rt}from"../chunks/index.BtgPWUf5.js";import{I as Ee}from"../chunks/input.DkkLw6xD.js";import{L as fe}from"../chunks/label.BOs7Apgt.js";import{R as It,S as Lt,a as Vt,V as Tt,b as Ot}from"../chunks/index.BWukIgvt.js";import{T as jt}from"../chunks/textarea.Wl-istdM.js";import{a as At}from"../chunks/users.mutations.MIc-7io-.js";import{n as Pt,b as Mt}from"../chunks/utils.DzuHJZus.js";import{u as Bt}from"../chunks/nostr-events.DAddr6bv.js";function ot(n,t,e){const a=n.slice();return a[11]=t[e],a}function ft(n){var Le,Ve,Te,Oe,je,Ae,Pe,Me,Be,Fe,Re,Ce,qe,ze,He,Ge;let t,e,a,s,o,l,r,f=((Le=n[4])==null?void 0:Le.title)+"",u,_,E,L=((Ve=n[4])==null?void 0:Ve.description)+"",z,q,i,V,ne,R,re,A,P,ue,C,pe,H,G,de,J,ge,K,Q,_e,W,he,X,Y,be,Z,ve,ie,U,ce,we,Ie;s=new rt({props:{size:"icon",variant:"outline",class:"border-none",$$slots:{default:[Ft]},$$scope:{ctx:n}}}),s.$on("click",n[6]),V=new fe({props:{for:"userImage",class:"font-bold",$$slots:{default:[Rt]},$$scope:{ctx:n}}}),R=new Et({props:{class:"w-24 h-auto",$$slots:{default:[qt]},$$scope:{ctx:n}}}),P=new fe({props:{for:"name",class:"font-bold",$$slots:{default:[zt]},$$scope:{ctx:n}}}),C=new Ee({props:{value:(Te=n[1])==null?void 0:Te.data.name,type:"text",id:"name",name:"name",placeholder:(je=(Oe=n[1])==null?void 0:Oe.data)==null?void 0:je.name}}),G=new fe({props:{for:"displayName",class:"font-bold",$$slots:{default:[Ht]},$$scope:{ctx:n}}}),J=new Ee({props:{value:(Ae=n[1])==null?void 0:Ae.data.displayName,type:"text",id:"displayName",name:"displayName",placeholder:(Me=(Pe=n[1])==null?void 0:Pe.data)==null?void 0:Me.displayName}}),Q=new fe({props:{for:"about",class:"font-bold",$$slots:{default:[Gt]},$$scope:{ctx:n}}}),W=new jt({props:{value:(Be=n[1])==null?void 0:Be.data.about,rows:8,id:"about",name:"about",placeholder:(Re=(Fe=n[1])==null?void 0:Fe.data)==null?void 0:Re.about}}),Y=new fe({props:{for:"nip05",class:"font-bold",$$slots:{default:[Jt]},$$scope:{ctx:n}}}),Z=new Ee({props:{value:(Ce=n[1])==null?void 0:Ce.data.nip05,type:"text",id:"nip05",name:"nip05",placeholder:(ze=(qe=n[1])==null?void 0:qe.data)==null?void 0:ze.nip05}});let h=((Ge=(He=n[1])==null?void 0:He.data)==null?void 0:Ge.trustLevel)&&$t(n);return U=new rt({props:{id:"userDataSubmit",class:"w-full font-bold",type:"submit",$$slots:{default:[Zt]},$$scope:{ctx:n}}}),{c(){t=T("form"),e=T("div"),a=T("div"),b(s.$$.fragment),o=S(),l=T("section"),r=T("h3"),u=B(f),_=S(),E=T("p"),z=B(L),q=S(),i=T("div"),b(V.$$.fragment),ne=S(),b(R.$$.fragment),re=S(),A=T("div"),b(P.$$.fragment),ue=S(),b(C.$$.fragment),pe=S(),H=T("div"),b(G.$$.fragment),de=S(),b(J.$$.fragment),ge=S(),K=T("div"),b(Q.$$.fragment),_e=S(),b(W.$$.fragment),he=S(),X=T("div"),b(Y.$$.fragment),be=S(),b(Z.$$.fragment),ve=S(),h&&h.c(),ie=S(),b(U.$$.fragment),this.h()},l($){t=O($,"FORM",{});var c=j(t);e=O(c,"DIV",{class:!0});var N=j(e);a=O(N,"DIV",{class:!0});var ee=j(a);v(s.$$.fragment,ee),o=D(ee),l=O(ee,"SECTION",{});var te=j(l);r=O(te,"H3",{class:!0});var $e=j(r);u=F($e,f),$e.forEach(p),_=D(te),E=O(te,"P",{class:!0});var oe=j(E);z=F(oe,L),oe.forEach(p),te.forEach(p),ee.forEach(p),q=D(N),i=O(N,"DIV",{class:!0});var ae=j(i);v(V.$$.fragment,ae),ne=D(ae),v(R.$$.fragment,ae),ae.forEach(p),re=D(N),A=O(N,"DIV",{class:!0});var y=j(A);v(P.$$.fragment,y),ue=D(y),v(C.$$.fragment,y),y.forEach(p),pe=D(N),H=O(N,"DIV",{class:!0});var se=j(H);v(G.$$.fragment,se),de=D(se),v(J.$$.fragment,se),se.forEach(p),ge=D(N),K=O(N,"DIV",{class:!0});var x=j(K);v(Q.$$.fragment,x),_e=D(x),v(W.$$.fragment,x),x.forEach(p),he=D(N),X=O(N,"DIV",{class:!0});var le=j(X);v(Y.$$.fragment,le),be=D(le),v(Z.$$.fragment,le),le.forEach(p),ve=D(N),h&&h.l(N),ie=D(N),v(U.$$.fragment,N),N.forEach(p),c.forEach(p),this.h()},h(){M(r,"class","text-lg font-bold"),M(E,"class","text-gray-600"),M(a,"class","flex items-center gap-1"),M(i,"class","grid w-full items-center gap-1.5"),M(A,"class","grid w-full items-center gap-1.5"),M(H,"class","grid w-full items-center gap-1.5"),M(K,"class","grid w-full items-center gap-1.5"),M(X,"class","grid w-full items-center gap-1.5"),M(e,"class","pb-4 space-y-2")},m($,c){I($,t,c),d(t,e),d(e,a),w(s,a,null),d(a,o),d(a,l),d(l,r),d(r,u),d(l,_),d(l,E),d(E,z),d(e,q),d(e,i),w(V,i,null),d(i,ne),w(R,i,null),d(e,re),d(e,A),w(P,A,null),d(A,ue),w(C,A,null),d(e,pe),d(e,H),w(G,H,null),d(H,de),w(J,H,null),d(e,ge),d(e,K),w(Q,K,null),d(K,_e),w(W,K,null),d(e,he),d(e,X),w(Y,X,null),d(X,be),w(Z,X,null),d(e,ve),h&&h.m(e,null),d(e,ie),w(U,e,null),ce=!0,we||(Ie=pt(t,"submit",dt(n[3])),we=!0)},p($,c){var Ke,Qe,We,Xe,Ye,Ze,Ue,ye,xe,et,tt,at,st,lt;const N={};c&16384&&(N.$$scope={dirty:c,ctx:$}),s.$set(N);const ee={};c&16384&&(ee.$$scope={dirty:c,ctx:$}),V.$set(ee);const te={};c&16386&&(te.$$scope={dirty:c,ctx:$}),R.$set(te);const $e={};c&16384&&($e.$$scope={dirty:c,ctx:$}),P.$set($e);const oe={};c&2&&(oe.value=(Ke=$[1])==null?void 0:Ke.data.name),c&2&&(oe.placeholder=(We=(Qe=$[1])==null?void 0:Qe.data)==null?void 0:We.name),C.$set(oe);const ae={};c&16384&&(ae.$$scope={dirty:c,ctx:$}),G.$set(ae);const y={};c&2&&(y.value=(Xe=$[1])==null?void 0:Xe.data.displayName),c&2&&(y.placeholder=(Ze=(Ye=$[1])==null?void 0:Ye.data)==null?void 0:Ze.displayName),J.$set(y);const se={};c&16384&&(se.$$scope={dirty:c,ctx:$}),Q.$set(se);const x={};c&2&&(x.value=(Ue=$[1])==null?void 0:Ue.data.about),c&2&&(x.placeholder=(xe=(ye=$[1])==null?void 0:ye.data)==null?void 0:xe.about),W.$set(x);const le={};c&16384&&(le.$$scope={dirty:c,ctx:$}),Y.$set(le);const ke={};c&2&&(ke.value=(et=$[1])==null?void 0:et.data.nip05),c&2&&(ke.placeholder=(at=(tt=$[1])==null?void 0:tt.data)==null?void 0:at.nip05),Z.$set(ke),(lt=(st=$[1])==null?void 0:st.data)!=null&&lt.trustLevel?h?(h.p($,c),c&2&&m(h,1)):(h=$t($),h.c(),m(h,1),h.m(e,ie)):h&&(De(),g(h,1,1,()=>{h=null}),Se());const Je={};c&16384&&(Je.$$scope={dirty:c,ctx:$}),U.$set(Je)},i($){ce||(m(s.$$.fragment,$),m(V.$$.fragment,$),m(R.$$.fragment,$),m(P.$$.fragment,$),m(C.$$.fragment,$),m(G.$$.fragment,$),m(J.$$.fragment,$),m(Q.$$.fragment,$),m(W.$$.fragment,$),m(Y.$$.fragment,$),m(Z.$$.fragment,$),m(h),m(U.$$.fragment,$),ce=!0)},o($){g(s.$$.fragment,$),g(V.$$.fragment,$),g(R.$$.fragment,$),g(P.$$.fragment,$),g(C.$$.fragment,$),g(G.$$.fragment,$),g(J.$$.fragment,$),g(Q.$$.fragment,$),g(W.$$.fragment,$),g(Y.$$.fragment,$),g(Z.$$.fragment,$),g(h),g(U.$$.fragment,$),ce=!1},d($){$&&p(t),k(s),k(V),k(R),k(P),k(C),k(G),k(J),k(Q),k(W),k(Y),k(Z),h&&h.d(),k(U),we=!1,Ie()}}}function Ft(n){let t;return{c(){t=T("span"),this.h()},l(e){t=O(e,"SPAN",{class:!0}),j(t).forEach(p),this.h()},h(){M(t,"class","cursor-pointer i-tdesign-arrow-left w-6 h-6")},m(e,a){I(e,t,a)},p:gt,d(e){e&&p(t)}}}function Rt(n){let t;return{c(){t=B("Profile image")},l(e){t=F(e,"Profile image")},m(e,a){I(e,t,a)},d(e){e&&p(t)}}}function Ct(n){var a,s,o,l,r,f;let t=((s=(a=n[1])==null?void 0:a.data)!=null&&s.name?(l=(o=n[1])==null?void 0:o.data)==null?void 0:l.name:(f=(r=n[1])==null?void 0:r.data)==null?void 0:f.displayName)+"",e;return{c(){e=B(t)},l(u){e=F(u,t)},m(u,_){I(u,e,_)},p(u,_){var E,L,z,q,i,V;_&2&&t!==(t=((L=(E=u[1])==null?void 0:E.data)!=null&&L.name?(q=(z=u[1])==null?void 0:z.data)==null?void 0:q.name:(V=(i=u[1])==null?void 0:i.data)==null?void 0:V.displayName)+"")&&it(e,t)},d(u){u&&p(e)}}}function qt(n){var o,l;let t,e,a,s;return t=new St({props:{src:(l=(o=n[1])==null?void 0:o.data)==null?void 0:l.image,alt:"pfp"}}),a=new Dt({props:{$$slots:{default:[Ct]},$$scope:{ctx:n}}}),{c(){b(t.$$.fragment),e=S(),b(a.$$.fragment)},l(r){v(t.$$.fragment,r),e=D(r),v(a.$$.fragment,r)},m(r,f){w(t,r,f),I(r,e,f),w(a,r,f),s=!0},p(r,f){var E,L;const u={};f&2&&(u.src=(L=(E=r[1])==null?void 0:E.data)==null?void 0:L.image),t.$set(u);const _={};f&16386&&(_.$$scope={dirty:f,ctx:r}),a.$set(_)},i(r){s||(m(t.$$.fragment,r),m(a.$$.fragment,r),s=!0)},o(r){g(t.$$.fragment,r),g(a.$$.fragment,r),s=!1},d(r){r&&p(e),k(t,r),k(a,r)}}}function zt(n){let t;return{c(){t=B("Name")},l(e){t=F(e,"Name")},m(e,a){I(e,t,a)},d(e){e&&p(t)}}}function Ht(n){let t;return{c(){t=B("Display Name")},l(e){t=F(e,"Display Name")},m(e,a){I(e,t,a)},d(e){e&&p(t)}}}function Gt(n){let t;return{c(){t=B("Short bio")},l(e){t=F(e,"Short bio")},m(e,a){I(e,t,a)},d(e){e&&p(t)}}}function Jt(n){let t;return{c(){t=B("Nostr address")},l(e){t=F(e,"Nostr address")},m(e,a){I(e,t,a)},d(e){e&&p(t)}}}function $t(n){let t,e,a,s,o,l;e=new fe({props:{class:"truncate font-bold",$$slots:{default:[Kt]},$$scope:{ctx:n}}});function r(u){n[7](u)}let f={name:"trustLevel",$$slots:{default:[Yt]},$$scope:{ctx:n}};return n[0]!==void 0&&(f.selected=n[0]),s=new It({props:f}),_t.push(()=>kt(s,"selected",r)),{c(){t=T("div"),b(e.$$.fragment),a=S(),b(s.$$.fragment),this.h()},l(u){t=O(u,"DIV",{class:!0});var _=j(t);v(e.$$.fragment,_),a=D(_),v(s.$$.fragment,_),_.forEach(p),this.h()},h(){M(t,"class","flex-grow")},m(u,_){I(u,t,_),w(e,t,null),d(t,a),w(s,t,null),l=!0},p(u,_){const E={};_&16384&&(E.$$scope={dirty:_,ctx:u}),e.$set(E);const L={};_&16390&&(L.$$scope={dirty:_,ctx:u}),!o&&_&1&&(o=!0,L.selected=u[0],ht(()=>o=!1)),s.$set(L)},i(u){l||(m(e.$$.fragment,u),m(s.$$.fragment,u),l=!0)},o(u){g(e.$$.fragment,u),g(s.$$.fragment,u),l=!1},d(u){u&&p(t),k(e),k(s)}}}function Kt(n){let t;return{c(){t=B("Trust level")},l(e){t=F(e,"Trust level")},m(e,a){I(e,t,a)},d(e){e&&p(t)}}}function Qt(n){var a,s;let t,e;return t=new Tt({props:{placeholder:(s=(a=n[1])==null?void 0:a.data)==null?void 0:s.trustLevel}}),{c(){b(t.$$.fragment)},l(o){v(t.$$.fragment,o)},m(o,l){w(t,o,l),e=!0},p(o,l){var f,u;const r={};l&2&&(r.placeholder=(u=(f=o[1])==null?void 0:f.data)==null?void 0:u.trustLevel),t.$set(r)},i(o){e||(m(t.$$.fragment,o),e=!0)},o(o){g(t.$$.fragment,o),e=!1},d(o){k(t,o)}}}function Wt(n){let t=n[11]+"",e;return{c(){e=B(t)},l(a){e=F(a,t)},m(a,s){I(a,e,s)},p(a,s){s&4&&t!==(t=a[11]+"")&&it(e,t)},d(a){a&&p(e)}}}function ut(n){let t,e;return t=new Ot({props:{value:n[11],$$slots:{default:[Wt]},$$scope:{ctx:n}}}),{c(){b(t.$$.fragment)},l(a){v(t.$$.fragment,a)},m(a,s){w(t,a,s),e=!0},p(a,s){const o={};s&4&&(o.value=a[11]),s&16388&&(o.$$scope={dirty:s,ctx:a}),t.$set(o)},i(a){e||(m(t.$$.fragment,a),e=!0)},o(a){g(t.$$.fragment,a),e=!1},d(a){k(t,a)}}}function Xt(n){let t,e,a=nt(n[2]),s=[];for(let l=0;l<a.length;l+=1)s[l]=ut(ot(n,a,l));const o=l=>g(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();t=me()},l(l){for(let r=0;r<s.length;r+=1)s[r].l(l);t=me()},m(l,r){for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(l,r);I(l,t,r),e=!0},p(l,r){if(r&4){a=nt(l[2]);let f;for(f=0;f<a.length;f+=1){const u=ot(l,a,f);s[f]?(s[f].p(u,r),m(s[f],1)):(s[f]=ut(u),s[f].c(),m(s[f],1),s[f].m(t.parentNode,t))}for(De(),f=a.length;f<s.length;f+=1)o(f);Se()}},i(l){if(!e){for(let r=0;r<a.length;r+=1)m(s[r]);e=!0}},o(l){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)g(s[r]);e=!1},d(l){l&&p(t),bt(s,l)}}}function Yt(n){let t,e,a,s;return t=new Lt({props:{class:"border-black border-2",$$slots:{default:[Qt]},$$scope:{ctx:n}}}),a=new Vt({props:{class:"border-black border-2 max-h-[350px] overflow-y-auto",$$slots:{default:[Xt]},$$scope:{ctx:n}}}),{c(){b(t.$$.fragment),e=S(),b(a.$$.fragment)},l(o){v(t.$$.fragment,o),e=D(o),v(a.$$.fragment,o)},m(o,l){w(t,o,l),I(o,e,l),w(a,o,l),s=!0},p(o,l){const r={};l&16386&&(r.$$scope={dirty:l,ctx:o}),t.$set(r);const f={};l&16388&&(f.$$scope={dirty:l,ctx:o}),a.$set(f)},i(o){s||(m(t.$$.fragment,o),m(a.$$.fragment,o),s=!0)},o(o){g(t.$$.fragment,o),g(a.$$.fragment,o),s=!1},d(o){o&&p(e),k(t,o),k(a,o)}}}function Zt(n){let t;return{c(){t=B("Save")},l(e){t=F(e,"Save")},m(e,a){I(e,t,a)},d(e){e&&p(t)}}}function Ut(n){var s,o;let t,e,a=((o=(s=n[1])==null?void 0:s.data)==null?void 0:o.id)&&ft(n);return{c(){a&&a.c(),t=me()},l(l){a&&a.l(l),t=me()},m(l,r){a&&a.m(l,r),I(l,t,r),e=!0},p(l,[r]){var f,u;(u=(f=l[1])==null?void 0:f.data)!=null&&u.id?a?(a.p(l,r),r&2&&m(a,1)):(a=ft(l),a.c(),m(a,1),a.m(t.parentNode,t)):a&&(De(),g(a,1,1,()=>{a=null}),Se())},i(l){e||(m(a),e=!0)},o(l){g(a),e=!1},d(l){l&&p(t),a&&a.d(l)}}}function yt(n,t,e){var q;let a,s,o,l,r;Ne(n,Nt,i=>e(8,o=i)),Ne(n,At,i=>e(9,l=i)),Ne(n,Pt,i=>e(10,r=i));let{data:f}=t,u={label:"",value:""};const _=async i=>{var A,P;const V=new FormData(i.currentTarget),ne=Object.fromEntries(V.entries());ne.trustLevel=u.value?u.value:(A=s==null?void 0:s.data)!=null&&A.trustLevel?s==null?void 0:s.data.trustLevel:a[0];const R=Object.fromEntries(Object.entries(ne).filter(([ue,C])=>C!=="")),re=r.getUser({hexpubkey:(P=r.activeUser)==null?void 0:P.pubkey});re.profile=Bt.strip().safeParse(s==null?void 0:s.data).data,await l.mutateAsync(R),await re.publish()},E=(q=f.menuItems.find(i=>i.value==="account-settings"))==null?void 0:q.links.find(i=>i.href===o.url.pathname);mt(()=>{var i;(i=s==null?void 0:s.data)!=null&&i.id||s==null||s.refetch()});const L=()=>Mt();function z(i){u=i,e(0,u)}return n.$$set=i=>{"data"in i&&e(5,f=i.data)},n.$$.update=()=>{n.$$.dirty&32&&e(2,{userTrustLevels:a,activeUser:s}=f,a,(e(1,s),e(5,f)))},[u,s,a,_,E,f,L,z]}class ca extends vt{constructor(t){super(),wt(this,t,yt,Ut,ct,{data:5})}}export{ca as component};
